<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ï–¥–∏–Ω–∞—è –°–∏—Å—Ç–µ–º–∞ –û–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <style>
        :root {
            --mvd-blue: #1c2a39;
            --mchs-orange: #e67e22;
            --bg: #f4f7f6;
            --sidebar: #2c3e50;
            --text: #333;
            --border: #bdc3c7;
        }

        body, html {
            margin: 0; padding: 0; height: 100vh;
            font-family: Arial, sans-serif; background: var(--bg); color: var(--text);
            overflow: hidden;
        }

        /* --- –í–•–û–î --- */
        #login-screen {
            position: fixed; inset: 0; background: var(--sidebar);
            display: flex; align-items: center; justify-content: center; z-index: 1000;
        }
        .login-form {
            background: white; padding: 40px; border-radius: 4px; width: 350px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }

        /* --- –°–¢–†–£–ö–¢–£–†–ê --- */
        .wrapper { display: none; height: 100vh; display: grid; grid-template-columns: 250px 1fr; }

        aside { background: var(--sidebar); color: white; display: flex; flex-direction: column; }
        .aside-header { padding: 20px; background: #1a252f; text-align: center; font-weight: bold; }

        nav ul { list-style: none; padding: 0; margin: 0; }
        nav li {
            padding: 15px 20px; cursor: pointer; border-bottom: 1px solid #34495e;
            transition: 0.3s; font-size: 0.9rem;
        }
        nav li:hover { background: #3e5871; }
        nav li.active { background: #3498db; }

        main { overflow-y: auto; display: flex; flex-direction: column; }
        header { 
            background: white; padding: 15px 30px; border-bottom: 2px solid var(--border);
            display: flex; justify-content: space-between; align-items: center;
        }

        /* --- –ú–û–î–£–õ–ò --- */
        .container { padding: 30px; display: none; }
        .container.active { display: block; }

        h2 { border-bottom: 2px solid var(--sidebar); padding-bottom: 10px; margin-bottom: 20px; }

        /* --- –§–û–†–ú–´ --- */
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 0.85rem; }
        input, select, textarea {
            width: 100%; padding: 10px; border: 1px solid var(--border);
            border-radius: 3px; box-sizing: border-box; font-size: 1rem;
        }
        button {
            background: var(--sidebar); color: white; border: none;
            padding: 12px 25px; border-radius: 3px; cursor: pointer; font-weight: bold;
        }
        button:hover { opacity: 0.9; }

        /* --- –ö–ê–†–¢–û–ß–ö–ò –ò –°–ü–ò–°–ö–ò --- */
        .report-card {
            background: white; border: 1px solid var(--border);
            padding: 15px; margin-bottom: 10px; border-left: 5px solid var(--sidebar);
        }
        .db-table { width: 100%; border-collapse: collapse; background: white; }
        .db-table th, .db-table td { border: 1px solid var(--border); padding: 12px; text-align: left; }
        .db-table th { background: #ecf0f1; }

        .tag { padding: 3px 8px; border-radius: 3px; font-size: 0.7rem; font-weight: bold; color: white; }
        .tag-mvd { background: #2980b9; }
        .tag-mchs { background: #e67e22; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-form">
            <h3 style="text-align:center; color: var(--sidebar)">–ï–°–û–£ –†–û–°–°–ò–ò</h3>
            <p style="text-align:center; font-size: 0.8rem; color: #777">–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ</p>
            <input type="text" id="user_name" placeholder="–§–∞–º–∏–ª–∏—è –ò.–û.">
            <input type="text" id="user_rank" placeholder="–ó–≤–∞–Ω–∏–µ/–î–æ–ª–∂–Ω–æ—Å—Ç—å">
            <select id="user_dept">
                <option value="–ú–í–î">–ú–í–î (–ü–æ–ª–∏—Ü–∏—è)</option>
                <option value="–ú–ß–°">–ú–ß–° (–ü–æ–∂–∞—Ä–Ω–∞—è/–ú–µ–¥–∏–∫–∏)</option>
            </select>
            <button onclick="login()" style="width:100%; margin-top:10px">–í–•–û–î –í –°–ò–°–¢–ï–ú–£</button>
        </div>
    </div>

    <div class="wrapper" id="main-ui" style="display:none">
        <aside>
            <div class="aside-header">–ï–°–û–£ v2.0</div>
            <div style="padding:15px; font-size: 0.8rem; background: #1a252f;">
                –°–æ—Ç—Ä—É–¥–Ω–∏–∫: <br><span id="display-name" style="color: #3498db"></span>
            </div>
            <nav>
                <ul>
                    <li onclick="showTab('mvd')" id="nav-mvd">üöî –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –ú–í–î</li>
                    <li onclick="showTab('mchs')" id="nav-mchs">üöí –ñ—É—Ä–Ω–∞–ª –ú–ß–°</li>
                    <li onclick="showTab('db')" id="nav-db">üìÇ –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö</li>
                    <li onclick="showTab('archive')" id="nav-archive">üìú –ê—Ä—Ö–∏–≤ –∑–∞–ø–∏—Å–µ–π</li>
                </ul>
            </nav>
            <div style="margin-top:auto; padding:20px;">
                <button onclick="location.reload()" style="width:100%; background:#c0392b; font-size:0.8rem">–í–´–•–û–î</button>
            </div>
        </aside>

        <main>
            <header>
                <div id="date-time">00.00.0000 00:00:00</div>
                <div id="dept-label" class="tag">–û–¢–î–ï–õ</div>
            </header>

            <div id="tab-mvd" class="container">
                <h2>–°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –æ–± –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–º –ø—Ä–∞–≤–æ–Ω–∞—Ä—É—à–µ–Ω–∏–∏</h2>
                <div class="form-group">
                    <label>–§–ò–û –ù–∞—Ä—É—à–∏—Ç–µ–ª—è</label>
                    <input type="text" id="mvd-target" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
                </div>
                <div class="form-group">
                    <label>–°—Ç–∞—Ç—å—è/–ù–∞—Ä—É—à–µ–Ω–∏–µ</label>
                    <input type="text" id="mvd-law" placeholder="–ù–∞–ø—Ä. 12.8 –ö–æ–ê–ü">
                </div>
                <div class="form-group">
                    <label>–û–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–µ–ª–∞</label>
                    <textarea id="mvd-desc" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –∑–∞–¥–µ—Ä–∂–∞–Ω–∏—è..."></textarea>
                </div>
                <button onclick="saveProtocol('–ú–í–î')">–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨ –ü–†–û–¢–û–ö–û–õ</button>
            </div>

            <div id="tab-mchs" class="container">
                <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è –ú–ß–°</h2>
                <div class="form-group">
                    <label>–¢–∏–ø –≤—ã–∑–æ–≤–∞</label>
                    <select id="mchs-type">
                        <option>–ü–æ–∂–∞—Ä / –ó–∞–¥—ã–º–ª–µ–Ω–∏–µ</option>
                        <option>–î–¢–ü —Å –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–º–∏</option>
                        <option>–û–∫–∞–∑–∞–Ω–∏–µ –º–µ–¥. –ø–æ–º–æ—â–∏</option>
                        <option>–¢–µ—Ö–Ω–æ–≥–µ–Ω–Ω–∞—è –∞–≤–∞—Ä–∏—è</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ê–¥—Ä–µ—Å / –†–∞–π–æ–Ω</label>
                    <input type="text" id="mchs-loc" placeholder="–ù–∞–ø—Ä. —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 5">
                </div>
                <div class="form-group">
                    <label>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏—Ö</label>
                    <input type="text" id="mchs-people" placeholder="–ö–æ–ª-–≤–æ, —Å–æ—Å—Ç–æ—è–Ω–∏–µ">
                </div>
                <button onclick="saveProtocol('–ú–ß–°')" style="background: var(--mchs-orange);">–°–û–ó–î–ê–¢–¨ –ö–ê–†–¢–û–ß–ö–£</button>
            </div>

            <div id="tab-db" class="container">
                <h2>–†–µ–µ—Å—Ç—Ä –≥—Ä–∞–∂–¥–∞–Ω –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</h2>
                <input type="text" id="db-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û –∏–ª–∏ –≥–æ—Å. –Ω–æ–º–µ—Ä—É..." onkeyup="searchDB()" style="margin-bottom: 20px;">
                <table class="db-table">
                    <thead>
                        <tr>
                            <th>–°—É–±—ä–µ–∫—Ç</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</th>
                        </tr>
                    </thead>
                    <tbody id="db-content">
                        </tbody>
                </table>
            </div>

            <div id="tab-archive" class="container">
                <h2>–ê—Ä—Ö–∏–≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π</h2>
                <div id="archive-list">
                    <p style="color:#777">–ó–∞–ø–∏—Å–µ–π –ø–æ–∫–∞ –Ω–µ—Ç...</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        let archive = JSON.parse(localStorage.getItem('rp_archive')) || [];
        let citizens = [
            {name: "–ê–ª–µ–∫—Å–µ–µ–≤ –î–º–∏—Ç—Ä–∏–π –ü–µ—Ç—Ä–æ–≤–∏—á", status: "–ß–∏—Å—Ç", info: "–í–ª–∞–¥–µ–ª–µ—Ü –í–ê–ó 2107 (–ï777–ö–•)"},
            {name: "–°–∏–¥–æ—Ä–æ–≤ –ê—Ä—Ç–µ–º –ò–≥–æ—Ä–µ–≤–∏—á", status: "–†–û–ó–´–°–ö", info: "–ü–æ–¥–æ–∑—Ä–µ–≤–∞–µ—Ç—Å—è –≤ –∫—Ä–∞–∂–µ. –û–ø–∞—Å–µ–Ω."},
            {name: "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞ ‚Ññ442", status: "–ê—Ä—Ö–∏–≤", info: "–ü–∞—Ü–∏–µ–Ω—Ç –≤—ã–ø–∏—Å–∞–Ω 12.01"}
        ];

        function login() {
            const name = document.getElementById('user_name').value;
            const rank = document.getElementById('user_rank').value;
            const dept = document.getElementById('user_dept').value;

            if(!name || !rank) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞!");

            document.getElementById('login-screen').style.display = 'none';
            document.querySelector('.wrapper').style.display = 'grid';
            
            document.getElementById('display-name').innerText = rank + " " + name;
            document.getElementById('dept-label').innerText = dept;
            document.getElementById('dept-label').className = "tag " + (dept === '–ú–í–î' ? 'tag-mvd' : 'tag-mchs');
            
            showTab(dept === '–ú–í–î' ? 'mvd' : 'mchs');
            updateTime();
            renderArchive();
            renderDB();
        }

        function showTab(tabId) {
            document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('nav li').forEach(l => l.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active');
            document.getElementById('nav-' + tabId).classList.add('active');
        }

        function saveProtocol(type) {
            let data = {};
            const time = new Date().toLocaleString();

            if(type === '–ú–í–î') {
                data = {
                    type: "–ü–†–û–¢–û–ö–û–õ –ú–í–î",
                    title: document.getElementById('mvd-target').value,
                    desc: "–°—Ç–∞—Ç—å—è: " + document.getElementById('mvd-law').value + " | " + document.getElementById('mvd-desc').value,
                    time: time
                };
            } else {
                data = {
                    type: "–í–´–ó–û–í –ú–ß–°",
                    title: document.getElementById('mchs-type').value,
                    desc: "–ê–¥—Ä–µ—Å: " + document.getElementById('mchs-loc').value + " | –ü–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–µ: " + document.getElementById('mchs-people').value,
                    time: time
                };
            }

            if(!data.title) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è!");

            archive.unshift(data);
            localStorage.setItem('rp_archive', JSON.stringify(archive));
            renderArchive();
            alert("–ó–∞–ø–∏—Å—å –≤–Ω–µ—Å–µ–Ω–∞ –≤ –∞—Ä—Ö–∏–≤!");
        }

        function renderArchive() {
            const list = document.getElementById('archive-list');
            if(archive.length === 0) return;
            
            list.innerHTML = archive.map(item => `
                <div class="report-card" style="border-left-color: ${item.type.includes('–ú–í–î') ? '#2980b9' : '#e67e22'}">
                    <div style="display:flex; justify-content:space-between; font-size:0.8rem; color:#777">
                        <span>${item.type}</span>
                        <span>${item.time}</span>
                    </div>
                    <div style="font-weight:bold; margin: 5px 0;">${item.title}</div>
                    <div style="font-size:0.9rem">${item.desc}</div>
                </div>
            `).join('');
        }

        function renderDB() {
            const body = document.getElementById('db-content');
            body.innerHTML = citizens.map(c => `
                <tr>
                    <td>${c.name}</td>
                    <td style="color:${c.status === '–†–û–ó–´–°–ö' ? 'red' : 'green'}"><b>${c.status}</b></td>
                    <td>${c.info}</td>
                </tr>
            `).join('');
        }

        function searchDB() {
            const q = document.getElementById('db-search').value.toLowerCase();
            const rows = document.querySelectorAll('#db-content tr');
            rows.forEach(r => r.style.display = r.innerText.toLowerCase().includes(q) ? "" : "none");
        }

        function updateTime() {
            setInterval(() => {
                document.getElementById('date-time').innerText = new Date().toLocaleString();
            }, 1000);
        }
    </script>
</body>
</html>
